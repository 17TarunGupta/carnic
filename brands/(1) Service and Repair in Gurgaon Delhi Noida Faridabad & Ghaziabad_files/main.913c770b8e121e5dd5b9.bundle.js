webpackJsonp([5],{"+KvB":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var o=n("3j3K"),i=n("p3n4"),a=n("kZql"),r=(n("XZJt"),n("NVOs")),s=n("fx6A"),c=n("5oXY"),d=function(){function e(e,t,n){this.fuguWidgetService=e,this.countryService=t,this.router=n,this.alive=!0,this.userDetails=new Object,this.configData=new Object,this.hostname="",this.defaultMessageToPublish="",this.iPadState=!0,this.newConversationInitiated=new o.p,this.newPostMessageReceived=new o.p,this.overallUnreadCount=0,this.conversationsUnreadCount={},this.isParentTabActive=!0,this.initReseller=!1,this.customHelpMsg="",this.conversations={},this.helpChannels={},this.is_collapsed=!0,this.browserChecks={isChrome:/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),isFirefox:/firefox/.test(navigator.userAgent.toLowerCase()),isWebkit:navigator.userAgent.search(/webkit/i)>=0,isEdge:"-ms-accelerator"in document.documentElement.style},this.show_message_source=!1,this.isSoundOn=!0,this.is_video_call_enabled="0",this.is_audio_call_enabled="0",this.isLoggedInUser=!1,this.onWindowFocusEvent=new o.p}return e.prototype.ngOnInit=function(){},e.prototype.postMessageToParentWindow=function(e){window.parent.postMessage(e,this.parentOrigin)},e.prototype.putUserDataForDriver=function(){var e={},t=this.fuguWidgetService.fuguWidgetData.driverInfo;return this.fuguWidgetService.fuguWidgetData.resellerToken&&this.fuguWidgetService.fuguWidgetData.referenceId&&(e.reseller_token=this.fuguWidgetService.fuguWidgetData.resellerToken,e.reference_id=this.fuguWidgetService.fuguWidgetData.referenceId),t&&(t.fullName&&(e.full_name=t.fullName),t.email&&(e.email=t.email),t.phoneNumber&&(e.phone_number=t.phoneNumber),t.userUniqueKey&&(e.user_unique_key=t.userUniqueKey)),e.device_type=3,e.device_id=0,e.local_timezone=this.getTimezone(),e},e.prototype.putUserData=function(){var e,t=this.getUserBrowserDetails(),n={},o="",i="",a="";if(this.f_uid_Id)a=this.f_uid_Id;else{var r=this.makeid();r+=this.fuguWidgetService.fuguWidgetData.appSecretKey||"",this.f_uid_Id=r,a=r}if(e=this.getCookie("f_uid"),this.fuguWidgetService.fuguWidgetData.address&&Object.keys(this.fuguWidgetService.fuguWidgetData.address).length&&(n.address={},n.address.name="",this.fuguWidgetService.fuguWidgetData.address.city&&(n.address.name+=this.fuguWidgetService.fuguWidgetData.address.city),this.fuguWidgetService.fuguWidgetData.address.country&&(n.address.name+=" "+this.fuguWidgetService.fuguWidgetData.address.country)),this.ip&&(n.ip=this.ip),localStorage.getItem("country_info")?n.country_info=JSON.parse(localStorage.getItem("country_info")):this.countryInfo&&(n.country_info=this.countryInfo),-1!==this.currentUrl.indexOf("utm_source")){var s=(d=(c=this.currentUrl).indexOf("utm_source"))+c.substring(d).indexOf("&");o=c.substring(d+11,s)}if(-1!==this.currentUrl.indexOf("utm_medium")){var c,d;s=(d=(c=this.currentUrl).indexOf("utm_medium"))+c.substring(d).indexOf("&");i=c.substring(d+11,s)}var u={device_id:a,device_type:3,device_details:t,source:4,browser_language:navigator.language,current_url:this.currentUrl,local_timezone:this.getTimezone()};if(this.fuguWidgetService.fuguWidgetData.appSecretKey)u.app_secret_key=this.fuguWidgetService.fuguWidgetData.appSecretKey;else if(this.fuguWidgetService.fuguWidgetData.resellerToken&&this.fuguWidgetService.fuguWidgetData.referenceId)u.reseller_token=this.fuguWidgetService.fuguWidgetData.resellerToken,u.reference_id=this.fuguWidgetService.fuguWidgetData.referenceId;else{if(!this.fuguWidgetService.fuguWidgetData.businessKey)throw new Error("no app_secret_key or business_unique_key provided");u.business_unique_key=this.fuguWidgetService.fuguWidgetData.businessKey}if(this.fuguWidgetService.fuguWidgetData.grouping_tags&&this.fuguWidgetService.fuguWidgetData.grouping_tags.length){var l=[];this.fuguWidgetService.fuguWidgetData.grouping_tags.map(function(e){l.push({tag_name:e.tag_name,reseller_team_id:e.team_id})}),u.grouping_tags=JSON.stringify(l)}o&&(u.referral_url=o),i&&(u.marketing_campaign=i),this.fuguWidgetService.fuguWidgetData.uniqueId&&(u.user_unique_key=encodeURIComponent(this.fuguWidgetService.fuguWidgetData.uniqueId)),this.fuguWidgetService.fuguWidgetData.email&&(u.email=this.fuguWidgetService.fuguWidgetData.email),this.fuguWidgetService.fuguWidgetData.name&&(u.full_name=this.fuguWidgetService.fuguWidgetData.name),this.fuguWidgetService.fuguWidgetData.phone&&(u.phone_number=this.fuguWidgetService.fuguWidgetData.phone),this.fuguWidgetService.fuguWidgetData.customAttributes?u.custom_attributes=JSON.stringify(this.fuguWidgetService.fuguWidgetData.customAttributes)||JSON.stringify({}):u.custom_attributes=JSON.stringify({}),e&&(u.device_key=e);var g=this.getParameterByName(this.currentUrl,"utm_source"),m=this.getParameterByName(this.currentUrl,"utm_medium");return g&&(n.referral_url=g),m&&(n.marketing_campaign=m),u.attributes=JSON.stringify(n)||{},u.app_version_code=200,u},e.prototype.getUserBrowserDetails=function(){var e="";screen.width&&(e+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));var t,n,o,i=navigator.appVersion,a=navigator.userAgent,r=navigator.appName,s=""+parseFloat(navigator.appVersion),c=parseInt(navigator.appVersion,10);-1!=(n=a.indexOf("Opera"))&&(r="Opera",s=a.substring(n+6),-1!=(n=a.indexOf("Version"))&&(s=a.substring(n+8))),-1!=(n=a.indexOf("OPR"))?(r="Opera",s=a.substring(n+4)):-1!=(n=a.indexOf("Edge"))?(r="Microsoft Edge",s=a.substring(n+5)):-1!=(n=a.indexOf("MSIE"))?(r="Microsoft Internet Explorer",s=a.substring(n+5)):-1!=(n=a.indexOf("Chrome"))?(r="Chrome",s=a.substring(n+7)):-1!=(n=a.indexOf("Safari"))?(r="Safari",s=a.substring(n+7),-1!=(n=a.indexOf("Version"))&&(s=a.substring(n+8))):-1!=(n=a.indexOf("Firefox"))?(r="Firefox",s=a.substring(n+8)):-1!=a.indexOf("Trident/")?(r="Microsoft Internet Explorer",s=a.substring(a.indexOf("rv:")+3)):(t=a.lastIndexOf(" ")+1)<(n=a.lastIndexOf("/"))&&(r=a.substring(t,n),s=a.substring(n+1),r.toLowerCase()==r.toUpperCase()&&(r=navigator.appName)),-1!=(o=s.indexOf(";"))&&(s=s.substring(0,o)),-1!=(o=s.indexOf(" "))&&(s=s.substring(0,o)),-1!=(o=s.indexOf(")"))&&(s=s.substring(0,o)),c=parseInt(""+s,10),isNaN(c)&&(s=""+parseFloat(navigator.appVersion),c=parseInt(navigator.appVersion,10));var d=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(i),u=!!navigator.cookieEnabled;"undefined"!=typeof navigator.cookieEnabled||u||(document.cookie="testcookie",u=-1!=document.cookie.indexOf("testcookie"));var l="-",g=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var m in g){var p=g[m];if(p.r.test(a)){l=p.s;break}}var h="-";switch(/Windows/.test(l)&&(h=/Windows (.*)/.exec(l)[1],l="Windows"),l){case"Mac OS X":h=/Mac OS X (10[\.\_\d]+)/.exec(a)[1];break;case"Android":h=/Android ([\.\_\d]+)/.exec(a)[1];break;case"iOS":h=(h=/OS (\d+)_(\d+)_?(\d+)?/.exec(i))[1]+"."+h[2]+"."+(0|h[3])}var f=navigator.language,_=window.location.href,C={screen:e,browser:r,browserVersion:s,browserMajorVersion:c,mobile:d,os:l,osVersion:h,cookies:u,browserLanguage:f,browserUrl:_=(_=_.replace("https://","")).replace("http://","")},v={"Browser Version":C.browserVersion,Browser:C.browser+" "+C.browserMajorVersion,"Browser Language":C.browserLanguage,OS:C.os+" "+C.osVersion,"Cookies Enabled":C.cookies,"Screen Size":C.screen,Source:C.browserUrl};return JSON.stringify(v)},e.prototype.makeid=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<10;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e+=(new Date).getTime()},e.prototype.getCookie=function(e){var t=JSON.parse(localStorage.getItem("fuguWidget")),n=this.website_host,o=!1;if(a.a.production?n.includes("hippochat.io")&&(o=!0):n.includes("officechat.io")&&(o=!0),t&&n){var i=void 0;if(t[n]){if(i=t[n][e])return i}else if(o&&(t[n=n.substr(n.indexOf(".")+1,n.length)]&&(i=t[n][e]),i))return i}return""},e.prototype.setCookie=function(e,t,n){var o=this.website_host,i=localStorage.getItem("fuguWidget");i?((i=JSON.parse(i))[o]||(i[o]={}),i[o][e]=t):((i={})[o]={},i[o][e]=t),localStorage.setItem("fuguWidget",JSON.stringify(i))},e.prototype.updateUserDetails=function(e){var t=this.fuguWidgetService.fuguWidgetData.businessName;this.userDetails.business_name=t||e.business_name,this.userDetails.full_name=e.full_name,this.userDetails.user_channel=e.user_channel,this.userDetails.user_id=e.user_id,this.userDetails.user_unique_key=e.user_unique_key,this.userDetails.en_user_id=e.en_user_id,this.userDetails.max_file_size=e.max_file_size},e.prototype.updateConfigDetails=function(e){this.configData["button-new_conversation_visible"]=e["button-new_conversation_visible"],this.configData["color-background"]=e["color-background"],this.configData["color-text"]=e["color-text"],this.configData["color-theme"]=e["color-theme"],this.configData["color-title_bar"]=e["color-title_bar"],this.configData.push_based_on_chat=e.push_based_on_chat,this.configData["keys-external_api_custom_detail"]=e["keys-external_api_custom_detail"],this.configData["text-subtitle"]=e["text-subtitle"],this.configData["text-title"]=e["text-title"],this.configData.business_image=e.business_image,this.configData["background-color-theme"]=e["background-color-theme"],this.configData["typing-allignment"]=e["typing-allignment"],this.configData.show_widget_default_channel=!!+e.show_widget_default_channel,this.configData.show_full_lead_form=e.show_full_lead_form,this.configData.whitelabel_enabled=e.whitelabel_enabled,this.configData.whitelabeled_tab_title=e.whitelabeled_tab_title,this.configData.allow_email_transcript=e.allow_email_transcript},e.prototype.userLogout=function(e){var t=this,n=this.getCookie("f_uid"),o=this.website_host;if(n){var i="app_secret_key="+encodeURIComponent(this.fuguWidgetService.fuguWidgetData.appSecretKey)+"&en_user_id="+this.userDetails.en_user_id;this.fuguWidgetService.logOutUser(i).takeWhile(function(){return t.alive}).subscribe(function(e){console.log("logout success"),t.postMessageToParentWindow({type:"Shutdown",data:{}})},function(e){console.log("logout error"),t.postMessageToParentWindow({type:"Shutdown",data:{}})})}else this.postMessageToParentWindow({type:"Shutdown",data:{}});localStorage.removeItem("f_uid_Id"),localStorage.removeItem("f_uid");var a=localStorage.getItem("fuguWidget");a&&(delete(a=JSON.parse(a))[o],localStorage.setItem("fuguWidget",JSON.stringify(a)))},e.prototype.getParameterByName=function(e,t){t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},Object.defineProperty(e.prototype,"f_uid_Id",{get:function(){var e=JSON.parse(localStorage.getItem("fuguWidget")),t=this.website_host,n=!1;if(a.a.production?t.includes("hippochat.io")&&(n=!0):t.includes("officechat.io")&&(n=!0),e&&t){var o=void 0;if(e[t]){if(o=e[t].f_uid_Id)return o}else if(n&&(e[t=t.substr(t.indexOf(".")+1,t.length)]&&(o=e[t].f_uid_Id),o))return o}return""},set:function(e){var t=localStorage.getItem("fuguWidget"),n=this.website_host;t?((t=JSON.parse(t))[n]||(t[n]={}),t[n].f_uid_Id=e):((t={})[n]={},t[n].f_uid_Id=e),localStorage.setItem("fuguWidget",JSON.stringify(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"website_host",{get:function(){var e=this.hostname,t=this.hostname.split(".").length-1,n=e.indexOf(".");return t>1&&(e=e.replace(e.substring(0,n+1),"")),a.a.production?"hippochat.io"==e&&(e=this.hostname):"officechat.io"==e&&(e=this.hostname),e},enumerable:!0,configurable:!0}),e.prototype.fireAllErrors=function(e){var t=this;Object.keys(e.controls).forEach(function(n){var o=e.get(n);o instanceof r.g?(o.markAsTouched({onlySelf:!0}),o.markAsDirty({onlySelf:!0})):o instanceof r.j?t.fireAllErrors(o):o instanceof r.d&&o.controls.forEach(function(e){t.fireAllErrors(e)})})},e.prototype.getTimezone=function(){var e=(new Date).getTimezoneOffset()/60;return e<0?e=Math.abs(e):e>0?e=-Math.abs(e):0==e&&(e=0),e.toString()?e.toString():"0"},e.prototype.sendNotificationToParentWindow=function(e,t){var n={count:e};t&&(n.hideNotification=!0),this.checkForHidingNotification()&&(n.doNotUpdateOnTitleBar=!0),this.postMessageToParentWindow({type:"Notification",data:n})},e.prototype.playNotificationSound=function(e){this.isSoundOn&&(document.getElementById("sound").innerHTML='<audio autoplay="autoplay"><source src="'+e+'.mp3" type="audio/mpeg" /><source src="'+e+'.ogg" type="audio/ogg" /><embed hidden="true" autostart="true" loop="false" src="'+e+'.mp3" /></audio>')},e.prototype.checkForHidingNotification=function(){return!(!this.parentOrigin.includes("hippochat.io")&&!this.fuguWidgetService.fuguWidgetData.ignore_auto_msgs)},e.prototype.getErrorMessage=function(e){if(e)for(var t in e.errors)if(e.errors.hasOwnProperty(t)&&e.touched&&e.value)return!0;return!1},e.prototype.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},e.prototype.isMobileBrowser=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},e.prototype.getCountry=function(){for(var e=this.countryService.getCountries(),t=0;t<e.length;t++){var n=e[t];if(n.countryCode.toLowerCase()==this.countryInfo.country_code.toLowerCase())return n}return{name:"",dialCode:"1",countryCode:"us"}},e.prototype.redirectBasedOnChannelId=function(e){-2===e.channel_id&&e.is_url_message?this.router.navigate(["chat/"+e.channel_id_for_url_message],{queryParams:{label_id:-1,default_message:e.message,is_url_message:!0},skipLocationChange:!this.isMobileBrowser()}):-2===e.channel_id?this.router.navigate(["chat/"+e.channel_id],{queryParams:{label_id:e.label_id,default_message:e.message},skipLocationChange:!this.isMobileBrowser()}):this.router.navigate(["chat/"+e.channel_id],{queryParams:{label_id:-1},skipLocationChange:!this.isMobileBrowser()})},e.prototype.checkClassContains=function(e,t){for(var n=!0,o=0;o<e.length;o++)if(n=t.contains(e[o]))return n;return!1},e.prototype.checkSingleEmoji=function(e){return 0==e.replace(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|[\ud83c[\ude50\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,"").length},e.prototype.addClassToIframe=function(e){this.postMessageToParentWindow({type:"addClassToIframeContent",data:e})},e.prototype.removeClassFromIframe=function(e){this.postMessageToParentWindow({type:"removeClassFromIframeContent",data:e})},e.prototype.ngOnDestroy=function(){this.alive=!1},e.ctorParameters=function(){return[{type:i.a},{type:s.a},{type:c.l}]},e}()},0:function(e,t,n){e.exports=n("x35b")},"6GLz":function(e,t,n){var o={"./modules/layout/layout.module.ngfactory":["k+8m",1,0],"./modules/payment-request/payment-request.module.ngfactory":["vEvk",3],"./modules/video-call/video-call.module.ngfactory":["Jyo+",2,0]};function i(e){var t=o[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}i.keys=function(){return Object.keys(o)},i.id="6GLz",e.exports=i},AFGG:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n("3j3K"),i=(n("owTz"),n("+KvB")),a=n("p3n4"),r=n("zCXK"),s=n("kZql"),c=function(){function e(e,t){this.commonService=e,this.fuguWidgetService=t,this.isFayeConnected=!1,this._destroyCheck=!1,this.pingInterval=0,this.chatNonReassignEvent=new o.p,this.activeChannelIdMessageEvent=new o.p,this.activeChannelIdTypingEvent=new o.p,this.activeChannelIdMessageSentEvent=new o.p,this.readAllEvent=new o.p,this.messageDeliveredEvent=new o.p,this.messageReadEvent=new o.p,this.fayeConnectionEvent=new o.p}return e.prototype.userChannelSubCallback=function(e){switch(e.notification_type){case r.f.Chat_Reassign:this.chatReassigned(e);break;default:this.otherEvent(e)}},e.prototype.chatReassigned=function(e){},e.prototype.otherEvent=function(e){this.chatNonReassignEvent.emit(e)},e.prototype.subscribeToChannel=function(e){var t=this;this.unsubscribeToActiveChannel(),this.activeChannelId=e,this.active_channel_id_subscription=this.client.subscribe("/"+this.activeChannelId,function(e){t.activeChannelIdSubCallback(e)})},e.prototype.activeChannelIdSubCallback=function(e){switch(e.notification_type){case r.f.Read_All:s.a.production||console.log("Faye Service => active channel Message Read response:",e),this.messageReadEvent.emit(e);break;default:switch(e.is_typing){case r.g.Typing_Start:case r.g.Typing_Stopped:this.activeChannelIdTypingEvent.emit(e);break;case r.g.Typing_End:s.a.production||console.log("Faye Service => active channel response: ",e),this.activeChannelIdMessageEvent.emit(e)}}},e.prototype.unsubscribeToActiveChannel=function(){this.active_channel_id_subscription&&(this.active_channel_id_subscription.cancel(),this.active_channel_id_subscription.unsubscribe(),this.activeChannelId=0)},e.prototype.sendMessage=function(e){var t=this,n=e.is_typing==r.g.Typing_End,o=-1;n&&(o=e.index),e.device_payload={device_details:navigator.userAgent,device_id:this.commonService.f_uid_Id,device_type:3},this.fuguWidgetService.fuguWidgetData.alwaysSkipBot&&(e.skip_bot=1);this.client.publish("/"+this.activeChannelId,e,{deadline:18,attempts:1}).then(function(i){s.a.production||console.log("message sent to server!",e),n&&-1!=o&&t.activeChannelIdMessageSentEvent.emit({index:o})},function(e){console.log("message sending failed!")})},e.prototype.publishOnChannel=function(e,t){return t.device_payload={device_details:navigator.userAgent,device_id:this.commonService.f_uid_Id,device_type:3},this.client.publish("/"+e,t,{attempts:1}).then(function(e){},function(e){throw console.log("message sending failed! "+JSON.stringify(e.message)),e})},e.prototype.setupSchedular=function(){var e=this,t=function(){Faye.Scheduler.apply(this,arguments)};return(t.prototype=Object.create(Faye.Scheduler.prototype)).send=function(){if("/meta/handshake"==this.message.channel||"/meta/connect"==this.message.channel)try{this.message.ext={user_id:e.commonService.userDetails.user_id,device_type:3,source:4}}catch(e){s.a.production||console.log("Faye Before send ",e)}"/meta/subscribe"==this.message.channel&&(this.message.user_id=e.commonService.userDetails.user_id),Faye.Scheduler.prototype.send.apply(this,arguments),s.a.production||console.log("schedular send => Sent message: ",this)},t.prototype.fail=function(){Faye.Scheduler.prototype.fail.apply(this,arguments),this.message.channel=="/"+this.activeChannelId&&console.log("Failed message:",this.message)},t.prototype.succeed=function(){Faye.Scheduler.prototype.succeed.apply(this,arguments),this.message.channel=="/"+this.activeChannelId&&(s.a.production||console.log("succeeded\xce message:",this.message))},t},e.prototype.appSecretKeySubCallback=function(e,t){var n=this;switch(t.notification_type){case r.f.Read_All:t.user_type==r.i.Agent&&t.channel_id==this.activeChannelId&&this.readAllEvent.emit(t);break;case r.f.Read_Unread:t.channel_id==this.activeChannelId&&(t.delivered_at?this.messageDeliveredEvent.emit(t):this.messageReadEvent.emit(t));break;case r.f.User_Migration:var o=this.commonService.userDetails.user_id;s.a.production||console.log("Widget Faye Migration: ",t),o!=t.migrated_to&&o!=t.user_id||(s.a.production||console.log("valid user migration"),this.fuguWidgetService.putUserDetails(this.commonService.putUserData()).takeWhile(function(){return n.alive}).subscribe(function(e){var t=e.data.device_key;if(n.commonService.setCookie("f_uid",t,10),n.commonService.updateUserDetails(e.data),n.commonService.postMessageToParentWindow({type:"Collapse"}),n.unsubscribeAllSubscriptions(!1),n.setupSubscriptions(),n.commonService.userDetails.user_unique_key.length>1)n.commonService.isConversationListValid=Object.keys(e.data.conversations).length>0;else{var o=e.data.conversations.filter(function(e){return-1!=e.channel_id});n.commonService.isConversationListValid=0!=o.length}}));break;case r.f.User_Logout:if(t.user_id==this.commonService.userDetails.user_id){localStorage.removeItem("f_uid_Id"),localStorage.removeItem("f_uid");var i=localStorage.getItem("fuguWidget");i&&(delete(i=JSON.parse(i))[this.commonService.website_host],localStorage.setItem("fuguWidget",JSON.stringify(i))),this.unsubscribeAllSubscriptions(!0),this.commonService.postMessageToParentWindow({type:"Shutdown",data:{}})}}},e.prototype.sendAck_Delivered=function(e){var t="/"+this.fuguWidgetService.fuguWidgetData.appSecretKey+"/readUnread";this.client.publish(t,e).then(function(e){console.log("Delivered msg sent to server")},function(e){console.log("failed to send delivered msg to server")})},e.prototype.sendAck_Read=function(e){var t="/"+this.activeChannelId;this.client.publish(t,e).then(function(t){s.a.production||console.log("Read msg sent to server",e)},function(e){console.log("failed to send read msg to server")})},e.prototype.getMessageTypeString=function(e){switch(e.message_type){case r.e.Customer_Agent_Message:return e.message;case r.e.Image_Message:return"attachment";case r.e.Bot_Text_Message:return e.message;case r.e.Form_Message:return"Form";case r.e.Feedback_Message:return"Feedback";default:return""}},e.prototype.setupVideoCallSubscriptions=function(e){var t=this;if(this.logError("from Dashboard => logging in user ",new Date),this.unsubscribeAllSubscriptions(this._destroyCheck),!this._destroyCheck){var n=this.setupSchedular();return this.client=new Faye.Client(""+s.a.faye_url,{scheduler:n,timeout:20,retry:2,interval:20}),this.client.disable("autodisconnect"),this.returnPromise().then(function(){t.active_channel_id_subscription=t.client.subscribe("/"+e,function(e){t.activeChannelIdSubCallback(e)})})}},e.prototype.returnPromise=function(){return new Promise(function(e,t){e("returned")})},e.prototype.setupSubscriptions=function(){var e=this;if(this.logError("from Dashboard => logging in user ",new Date),this.unsubscribeAllSubscriptions(this._destroyCheck),!this._destroyCheck){var t=this.setupSchedular();this.client=new Faye.Client(""+s.a.faye_url,{scheduler:t,timeout:20,retry:2,interval:20}),this.client.disable("autodisconnect"),this.app_secret_key_subscription=this.client.subscribe("/"+this.fuguWidgetService.fuguWidgetData.appSecretKey+"/**").withChannel(function(t,n){s.a.production||console.log("in faye service app_secret_key_subscription channel: ",t," , message: ",n),e.appSecretKeySubCallback(t,n)}),this.user_channel_subscription=this.client.subscribe("/"+this.commonService.userDetails.user_channel,function(t){s.a.production||console.log("in FayeService => UserChannelSubs",t),e.userChannelSubCallback(t)});this.client.on("transport:down",function(){var t=new Date,n=" Faye disconnected =>  "+t.toLocaleTimeString();console.log(n),e.isFayeConnected=!1,e.fayeConnectionEvent.emit(!1),e.ping(),e.pingInterval=setInterval(function(){e._destroyCheck?clearInterval(e.pingInterval):e.ping()},2e3),e.logError(n,t)}),this.client.on("transport:up",function(){var t=new Date,n=" Faye connected =>  "+t.toLocaleTimeString();console.log(n),e.isFayeConnected=!0,e.fayeConnectionEvent.emit(!0),clearInterval(e.pingInterval),e.logError(n,t)}),s.a.production||console.log("Faye service => Subscribed all channels")}},e.prototype.sendFayeNotificationToParentWindow=function(e){var t;this.commonService.checkForHidingNotification()||(t="d0a8092a9e8bb3d2c1f7f2db9bb75c49"==this.fuguWidgetService.fuguWidgetData.appSecretKey?"https://fuguchat.s3.ap-south-1.amazonaws.com/image/bA28ZilpcU_1549460883700.png":"https://s3.ap-south-1.amazonaws.com/fuguchat/images/test/profile/hippo_favicon.png",this.commonService.postMessageToParentWindow({type:"FayeNotification",data:{channel_id:e.channel_id,body:this.getMessageTypeString(e),icon:t,title:"Support",agent_name:e.agent_name,message:this.getMessageTypeString(e),unread_count:this.commonService.overallUnreadCount}}))},e.prototype.sendUnreadCountToParentWindow=function(){this.commonService.postMessageToParentWindow({type:"UnreadCountChanged",data:{unread_count:this.commonService.overallUnreadCount}})},e.prototype.unsubscribeAllSubscriptions=function(e,t){this._destroyCheck=e,e&&this.logError(t,new Date),this.active_channel_id_subscription&&(this.active_channel_id_subscription.cancel(),this.active_channel_id_subscription.unsubscribe()),this.user_channel_subscription&&(this.user_channel_subscription.cancel(),this.user_channel_subscription.unsubscribe()),this.app_secret_key_subscription&&(this.app_secret_key_subscription.cancel(),this.app_secret_key_subscription.unsubscribe()),this.client&&(this.client.unsubscribe(),this.client.disconnect()),this.activeChannelId=0,s.a.production||console.log("Faye service => unsubscribed all channels")},e.prototype.ping=function(){if(!this._destroyCheck&&this.commonService.userDetails.user_id){var e=moment().utc().format(),t={message:"",full_name:this.commonService.userDetails.full_name,user_id:this.commonService.userDetails.user_id,date_time:e,is_typing:r.g.Typing_Stopped,message_type:r.e.Customer_Agent_Message,user_type:r.i.Customer,on_subscribe:1};this.sendMessage(t),s.a.production||console.log("sent ping ",t)}},e.prototype.ngOnDestroy=function(){console.log("Faye Serivce => onDestroy"),this.unsubscribeAllSubscriptions(!0),this.alive=!1},e.prototype.logError=function(e,t){s.a.production||console.log("widget Faye exceptions: ",e)},e.ctorParameters=function(){return[{type:i.a},{type:a.a}]},e}()},"NG/o":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){return function(){}}()},PP02:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(){}return e.getValidatorErrorMessage=function(e,t){return{required:"This field is required.",invalidCreditCard:"Please enter a valid credit card number.",invalidEmailAddress:"Please enter a valid email.",invalidPassword:"Please enter a valid password. Password must be at least 6 characters long, and contain a number.",minlength:"This field must be "+t.requiredLength+" characters long.",maxlength:"This field must be "+t.requiredLength+" characters long.",min:"This field must be greater than "+(t.min-1)+".",max:"This field must be less than "+(t.max+1)+".",invalidPhoneNumber:"Please enter a valid contact number.",invalidZipCode:"Please enter a valid ZIP Code.",invalidVIN:"Please enter a valid VIN.",invalidWeight:"Weight value should not exceed 250.",invalidCapacity:"Vehicle Capcity should not exceed 5500.",invalidOTP:"Please enter a valid OTP",pattern:"Invalid characters"}[e]},e.creditCardValidator=function(e){return e.value.match(/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/)?null:{invalidCreditCard:!0}},e.emailValidator=function(e){return e.value.match(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/)||""==e.value?null:{invalidEmailAddress:!0}},e.alternateEmailValidator=function(e){return""==e.value?null:e.value.match(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/)||""==e.value?null:{invalidEmailAddress:!0}},e.passwordValidator=function(e){},e.phoneNumberValidator=function(e){return e.value.match(/^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/i)&&10==e.value.length||""==e.value?null:{invalidPhoneNumber:!0}},e.zipCodeValidator=function(e){return e.value.match(/^[a-zA-Z0-9 ]*$/)?null:{invalidZipCode:!0}},e.NumberValidator=function(e){return e.value.match(/^[0-9 ]*$/)?null:{invalidOTP:!0}},e.mobileNumberValidator=function(e){return e.value.toString().match(/\(?([0-9]{3})\)?([ .-]?)([0-9]{3})\2([0-9]{4})/)?null:{invalidPhoneNumber:!0}},e.generalPhoneNumberValidator=function(e){return e.value.trim().toString().match(/^[//+]{0,1}[0-9]{6,17}$/)?null:{invalidPhoneNumber:!0}},e.onlyNumberValidator=function(e){return e.value.trim().toString().match(/^[0-9]{4,14}$/)?null:{invalidPhoneNumber:!0}},e.VINValidator=function(e){return 17==e.value.length?null:{invalidVIN:!0}},e.capacityValidator=function(e){return parseInt(e.value)>5500?{invalidCapacity:!0}:null},e.weightValidator=function(e){return parseInt(e.value)>250?{invalidWeight:!0}:null},e.patternValidator=function(e,t){return e.value.match(t)||""==e.value?null:{"invalid characters":!0}},e}()},XBTN:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n("g5jc"),i=function(){function e(){this.alertPush=new o.b}return e.prototype.sendAlert=function(e){this.alertPush.next(e)},e.prototype.getAlert=function(){return this.alertPush.asObservable()},e}()},fx6A:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(){this.countries=[{name:"",dialCode:"93",countryCode:"af"},{name:"",dialCode:"355",countryCode:"al"},{name:"",dialCode:"213",countryCode:"dz"},{name:"",dialCode:"1684",countryCode:"as"},{name:"",dialCode:"376",countryCode:"ad"},{name:"",dialCode:"244",countryCode:"ao"},{name:"",dialCode:"1264",countryCode:"ai"},{name:"",dialCode:"1268",countryCode:"ag"},{name:"",dialCode:"54",countryCode:"ar"},{name:"",dialCode:"374",countryCode:"am"},{name:"",dialCode:"297",countryCode:"aw"},{name:"",dialCode:"61",countryCode:"au"},{name:"",dialCode:"43",countryCode:"at"},{name:"",dialCode:"994",countryCode:"az"},{name:"",dialCode:"1242",countryCode:"bs"},{name:"",dialCode:"973",countryCode:"bh"},{name:"",dialCode:"880",countryCode:"bd"},{name:"",dialCode:"1246",countryCode:"bb"},{name:"",dialCode:"375",countryCode:"by"},{name:"",dialCode:"32",countryCode:"be"},{name:"",dialCode:"501",countryCode:"bz"},{name:"",dialCode:"229",countryCode:"bj"},{name:"",dialCode:"1441",countryCode:"bm"},{name:"",dialCode:"975",countryCode:"bt"},{name:"",dialCode:"591",countryCode:"bo"},{name:"",dialCode:"387",countryCode:"ba"},{name:"",dialCode:"267",countryCode:"bw"},{name:"",dialCode:"55",countryCode:"br"},{name:"",dialCode:"246",countryCode:"io"},{name:"",dialCode:"1284",countryCode:"vg"},{name:"",dialCode:"673",countryCode:"bn"},{name:"",dialCode:"359",countryCode:"bg"},{name:"",dialCode:"226",countryCode:"bf"},{name:"",dialCode:"257",countryCode:"bi"},{name:"",dialCode:"855",countryCode:"kh"},{name:"",dialCode:"237",countryCode:"cm"},{name:"",dialCode:"1",countryCode:"ca"},{name:"",dialCode:"238",countryCode:"cv"},{name:"",dialCode:"599",countryCode:"bq"},{name:"",dialCode:"1345",countryCode:"ky"},{name:"",dialCode:"236",countryCode:"cf"},{name:"",dialCode:"235",countryCode:"td"},{name:"",dialCode:"56",countryCode:"cl"},{name:"",dialCode:"86",countryCode:"cn"},{name:"",dialCode:"61",countryCode:"cx"},{name:"",dialCode:"61",countryCode:"cc"},{name:"",dialCode:"57",countryCode:"co"},{name:"",dialCode:"269",countryCode:"km"},{name:"",dialCode:"243",countryCode:"cd"},{name:"",dialCode:"242",countryCode:"cg"},{name:"",dialCode:"682",countryCode:"ck"},{name:"",dialCode:"506",countryCode:"cr"},{name:"",dialCode:"225",countryCode:"ci"},{name:"",dialCode:"385",countryCode:"hr"},{name:"",dialCode:"53",countryCode:"cu"},{name:"",dialCode:"599",countryCode:"cw"},{name:"",dialCode:"357",countryCode:"cy"},{name:"",dialCode:"420",countryCode:"cz"},{name:"",dialCode:"45",countryCode:"dk"},{name:"",dialCode:"253",countryCode:"dj"},{name:"",dialCode:"1767",countryCode:"dm"},{name:"",dialCode:"1",countryCode:"do"},{name:"",dialCode:"593",countryCode:"ec"},{name:"",dialCode:"20",countryCode:"eg"},{name:"",dialCode:"503",countryCode:"sv"},{name:"",dialCode:"240",countryCode:"gq"},{name:"",dialCode:"291",countryCode:"er"},{name:"",dialCode:"372",countryCode:"ee"},{name:"",dialCode:"251",countryCode:"et"},{name:"",dialCode:"500",countryCode:"fk"},{name:"",dialCode:"298",countryCode:"fo"},{name:"",dialCode:"679",countryCode:"fj"},{name:"",dialCode:"358",countryCode:"fi"},{name:"",dialCode:"33",countryCode:"fr"},{name:"",dialCode:"594",countryCode:"gf"},{name:"",dialCode:"689",countryCode:"pf"},{name:"",dialCode:"241",countryCode:"ga"},{name:"",dialCode:"220",countryCode:"gm"},{name:"",dialCode:"995",countryCode:"ge"},{name:"",dialCode:"49",countryCode:"de"},{name:"",dialCode:"233",countryCode:"gh"},{name:"",dialCode:"350",countryCode:"gi"},{name:"",dialCode:"30",countryCode:"gr"},{name:"",dialCode:"299",countryCode:"gl"},{name:"",dialCode:"1473",countryCode:"gd"},{name:"",dialCode:"590",countryCode:"gp"},{name:"",dialCode:"1671",countryCode:"gu"},{name:"",dialCode:"502",countryCode:"gt"},{name:"",dialCode:"44",countryCode:"gg"},{name:"",dialCode:"224",countryCode:"gn"},{name:"",dialCode:"245",countryCode:"gw"},{name:"",dialCode:"592",countryCode:"gy"},{name:"",dialCode:"509",countryCode:"ht"},{name:"",dialCode:"504",countryCode:"hn"},{name:"",dialCode:"852",countryCode:"hk"},{name:"",dialCode:"36",countryCode:"hu"},{name:"",dialCode:"354",countryCode:"is"},{name:"",dialCode:"91",countryCode:"in"},{name:"",dialCode:"62",countryCode:"id"},{name:"",dialCode:"98",countryCode:"ir"},{name:"",dialCode:"964",countryCode:"iq"},{name:"",dialCode:"353",countryCode:"ie"},{name:"",dialCode:"44",countryCode:"im"},{name:"",dialCode:"972",countryCode:"il"},{name:"",dialCode:"39",countryCode:"it"},{name:"",dialCode:"1876",countryCode:"jm"},{name:"",dialCode:"81",countryCode:"jp"},{name:"",dialCode:"44",countryCode:"je"},{name:"",dialCode:"962",countryCode:"jo"},{name:"",dialCode:"7",countryCode:"kz"},{name:"",dialCode:"254",countryCode:"ke"},{name:"",dialCode:"686",countryCode:"ki"},{name:"",dialCode:"383",countryCode:"xk"},{name:"",dialCode:"965",countryCode:"kw"},{name:"",dialCode:"996",countryCode:"kg"},{name:"",dialCode:"856",countryCode:"la"},{name:"",dialCode:"371",countryCode:"lv"},{name:"",dialCode:"961",countryCode:"lb"},{name:"",dialCode:"266",countryCode:"ls"},{name:"",dialCode:"231",countryCode:"lr"},{name:"",dialCode:"218",countryCode:"ly"},{name:"",dialCode:"423",countryCode:"li"},{name:"",dialCode:"370",countryCode:"lt"},{name:"",dialCode:"352",countryCode:"lu"},{name:"",dialCode:"853",countryCode:"mo"},{name:"",dialCode:"389",countryCode:"mk"},{name:"",dialCode:"261",countryCode:"mg"},{name:"",dialCode:"265",countryCode:"mw"},{name:"",dialCode:"60",countryCode:"my"},{name:"",dialCode:"960",countryCode:"mv"},{name:"",dialCode:"223",countryCode:"ml"},{name:"",dialCode:"356",countryCode:"mt"},{name:"",dialCode:"692",countryCode:"mh"},{name:"",dialCode:"596",countryCode:"mq"},{name:"",dialCode:"222",countryCode:"mr"},{name:"",dialCode:"230",countryCode:"mu"},{name:"",dialCode:"262",countryCode:"yt"},{name:"",dialCode:"52",countryCode:"mx"},{name:"",dialCode:"691",countryCode:"fm"},{name:"",dialCode:"373",countryCode:"md"},{name:"",dialCode:"377",countryCode:"mc"},{name:"",dialCode:"976",countryCode:"mn"},{name:"",dialCode:"382",countryCode:"me"},{name:"",dialCode:"1664",countryCode:"ms"},{name:"",dialCode:"212",countryCode:"ma"},{name:"",dialCode:"258",countryCode:"mz"},{name:"",dialCode:"95",countryCode:"mm"},{name:"",dialCode:"264",countryCode:"na"},{name:"",dialCode:"674",countryCode:"nr"},{name:"",dialCode:"977",countryCode:"np"},{name:"",dialCode:"31",countryCode:"nl"},{name:"",dialCode:"687",countryCode:"nc"},{name:"",dialCode:"64",countryCode:"nz"},{name:"",dialCode:"505",countryCode:"ni"},{name:"",dialCode:"227",countryCode:"ne"},{name:"",dialCode:"234",countryCode:"ng"},{name:"",dialCode:"683",countryCode:"nu"},{name:"",dialCode:"672",countryCode:"nf"},{name:"",dialCode:"850",countryCode:"kp"},{name:"",dialCode:"1670",countryCode:"mp"},{name:"",dialCode:"47",countryCode:"no"},{name:"",dialCode:"968",countryCode:"om"},{name:"",dialCode:"92",countryCode:"pk"},{name:"",dialCode:"680",countryCode:"pw"},{name:"",dialCode:"970",countryCode:"ps"},{name:"",dialCode:"507",countryCode:"pa"},{name:"",dialCode:"675",countryCode:"pg"},{name:"",dialCode:"595",countryCode:"py"},{name:"",dialCode:"51",countryCode:"pe"},{name:"",dialCode:"63",countryCode:"ph"},{name:"",dialCode:"48",countryCode:"pl"},{name:"",dialCode:"351",countryCode:"pt"},{name:"",dialCode:"1",countryCode:"pr"},{name:"",dialCode:"974",countryCode:"qa"},{name:"",dialCode:"262",countryCode:"re"},{name:"",dialCode:"40",countryCode:"ro"},{name:"",dialCode:"7",countryCode:"ru"},{name:"",dialCode:"250",countryCode:"rw"},{name:"",dialCode:"590",countryCode:"bl"},{name:"",dialCode:"290",countryCode:"sh"},{name:"",dialCode:"1869",countryCode:"kn"},{name:"",dialCode:"1758",countryCode:"lc"},{name:"",dialCode:"590",countryCode:"mf"},{name:"",dialCode:"508",countryCode:"pm"},{name:"",dialCode:"1784",countryCode:"vc"},{name:"",dialCode:"685",countryCode:"ws"},{name:"",dialCode:"378",countryCode:"sm"},{name:"",dialCode:"239",countryCode:"st"},{name:"",dialCode:"966",countryCode:"sa"},{name:"",dialCode:"221",countryCode:"sn"},{name:"",dialCode:"381",countryCode:"rs"},{name:"",dialCode:"248",countryCode:"sc"},{name:"",dialCode:"232",countryCode:"sl"},{name:"",dialCode:"65",countryCode:"sg"},{name:"",dialCode:"1721",countryCode:"sx"},{name:"",dialCode:"421",countryCode:"sk"},{name:"",dialCode:"386",countryCode:"si"},{name:"",dialCode:"677",countryCode:"sb"},{name:"",dialCode:"252",countryCode:"so"},{name:"",dialCode:"27",countryCode:"za"},{name:"",dialCode:"82",countryCode:"kr"},{name:"",dialCode:"211",countryCode:"ss"},{name:"",dialCode:"34",countryCode:"es"},{name:"",dialCode:"94",countryCode:"lk"},{name:"",dialCode:"249",countryCode:"sd"},{name:"",dialCode:"597",countryCode:"sr"},{name:"",dialCode:"47",countryCode:"sj"},{name:"",dialCode:"268",countryCode:"sz"},{name:"",dialCode:"46",countryCode:"se"},{name:"",dialCode:"41",countryCode:"ch"},{name:"",dialCode:"963",countryCode:"sy"},{name:"",dialCode:"886",countryCode:"tw"},{name:"",dialCode:"992",countryCode:"tj"},{name:"",dialCode:"255",countryCode:"tz"},{name:"",dialCode:"66",countryCode:"th"},{name:"",dialCode:"670",countryCode:"tl"},{name:"",dialCode:"228",countryCode:"tg"},{name:"",dialCode:"690",countryCode:"tk"},{name:"",dialCode:"676",countryCode:"to"},{name:"",dialCode:"1868",countryCode:"tt"},{name:"",dialCode:"216",countryCode:"tn"},{name:"",dialCode:"90",countryCode:"tr"},{name:"",dialCode:"993",countryCode:"tm"},{name:"",dialCode:"1649",countryCode:"tc"},{name:"",dialCode:"688",countryCode:"tv"},{name:"",dialCode:"1340",countryCode:"vi"},{name:"",dialCode:"256",countryCode:"ug"},{name:"",dialCode:"380",countryCode:"ua"},{name:"",dialCode:"971",countryCode:"ae"},{name:"",dialCode:"44",countryCode:"gb"},{name:"",dialCode:"1",countryCode:"us"},{name:"",dialCode:"598",countryCode:"uy"},{name:"",dialCode:"998",countryCode:"uz"},{name:"",dialCode:"678",countryCode:"vu"},{name:"",dialCode:"39",countryCode:"va"},{name:"",dialCode:"58",countryCode:"ve"},{name:"",dialCode:"84",countryCode:"vn"},{name:"",dialCode:"681",countryCode:"wf"},{name:"",dialCode:"212",countryCode:"eh"},{name:"",dialCode:"967",countryCode:"ye"},{name:"",dialCode:"260",countryCode:"zm"},{name:"",dialCode:"263",countryCode:"zw"},{name:"",dialCode:"358",countryCode:"ax"}],this.dialCodeMap={"074":"BV",352:"AX",672:"AQ",972:"IL",93:"AF",355:"AL",213:"DZ",376:"AD",244:"AO",54:"AR",374:"AM",297:"AW",61:"AU",43:"AT",994:"AZ",973:"BH",880:"BD",375:"BY",32:"BE",501:"BZ",229:"BJ",975:"BT",387:"BA",267:"BW",55:"BR",246:"IO",359:"BG",226:"BF",257:"BI",855:"KH",237:"CM",238:"CV",345:"KY",236:"CF",235:"TD",56:"CL",86:"CN",57:"CO",269:"KM",242:"CG",682:"CK",506:"CR",385:"HR",53:"CU",537:"CY",420:"CZ",45:"DK",253:"DJ",593:"EC",20:"EG",503:"SV",240:"GQ",291:"ER",372:"EE",251:"ET",298:"FO",679:"FJ",358:"FI",33:"FR",594:"GF",689:"PF",241:"GA",220:"GM",995:"GE",49:"DE",233:"GH",350:"GI",30:"GR",299:"GL",590:"GP",502:"GT",224:"GN",245:"GW",595:"GY",509:"HT",504:"HN",36:"HU",354:"IS",91:"IN",62:"ID",964:"IQ",353:"IE",39:"IT",81:"JP",962:"JO",77:"KZ",254:"KE",686:"KI",965:"KW",996:"KG",371:"LV",961:"LB",266:"LS",231:"LR",423:"LI",370:"LT",261:"MG",265:"MW",60:"MY",960:"MV",223:"ML",356:"MT",692:"MH",596:"MQ",222:"MR",230:"MU",262:"YT",52:"MX",377:"MC",976:"MN",382:"ME",212:"MA",95:"MM",264:"NA",674:"NR",977:"NP",31:"NL",599:"AN",687:"NC",64:"NZ",505:"NI",227:"NE",234:"NG",683:"NU",47:"NO",968:"OM",92:"PK",680:"PW",507:"PA",675:"PG",51:"PE",63:"PH",48:"PL",351:"PT",974:"QA",40:"RO",250:"RW",685:"WS",378:"SM",966:"SA",221:"SN",381:"RS",248:"SC",232:"SL",65:"SG",421:"SK",386:"SI",677:"SB",27:"ZA",500:"GS",34:"ES",94:"LK",249:"SD",597:"SR",268:"SZ",46:"SE",41:"CH",992:"TJ",66:"TH",228:"TG",690:"TK",676:"TO",216:"TN",90:"TR",993:"TM",688:"TV",256:"UG",380:"UA",971:"AE",44:"GB",598:"UY",998:"UZ",678:"VU",681:"WF",967:"YE",260:"ZM",263:"ZW",591:"BO",673:"BN",243:"CD",225:"CI",379:"VA",852:"HK",98:"IR",850:"KP",82:"KR",856:"LA",218:"LY",853:"MO",389:"MK",691:"FM",373:"MD",258:"MZ",970:"PS",872:"PN",7:"RU",290:"SH",508:"PM",239:"ST",252:"SO",963:"SY",886:"TW",255:"TZ",670:"TL",58:"VE",84:"VN",1:"VG"}}return e.prototype.getCountries=function(){return this.countries},e.ctorParameters=function(){return[]},e}()},kZql:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o={production:!0,api_url:"https://hippo-api.fuguchat.com/api/",faye_url:"https://api.fuguchat.com:3002/faye",CHROME_EXTENSION_ID:"onnpnbcklmahhoajlilopflaandmlooa"}},p3n4:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n("3j3K"),i=n("Fzro"),a=(n("owTz"),n("kZql")),r=function(){function e(e){this.http=e,this.integrations={},this.integrations_enabled=!1,this.configFetchEvent=new o.p}return Object.defineProperty(e.prototype,"fuguWidgetData",{get:function(){return this._fuguWidgetData},set:function(e){this._fuguWidgetData=e},enumerable:!0,configurable:!0}),e.prototype.putUserDetails=function(e){e=Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&");var t=new i.d;return t.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(a.a.api_url+"users/putUserDetails",e.trim(),{headers:t}).map(function(e){return e.json()})},e.prototype.putUserDetailsReseller=function(e){e=Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&");var t=new i.d;return t.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(a.a.api_url+"reseller/putUserDetails",e.trim(),{headers:t}).map(function(e){return e.json()})},e.prototype.getConfigurations=function(){var e="app_secret_key="+this.fuguWidgetData.appSecretKey,t=new i.d;return t.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(a.a.api_url+"business/getConfiguration",e,{headers:t}).map(function(e){return e.json()})},e.prototype.findIP=function(){var e=new i.d;return e.append("Content-Type","application/x-www-form-urlencoded"),this.http.get("https://jsonip.com",{headers:e}).map(function(e){return e.json()})},e.prototype.getMessages=function(e,t,n){var o=new i.d,r="app_secret_key="+encodeURIComponent(this.fuguWidgetData.appSecretKey)+"&channel_id="+e+"&en_user_id="+t;return n.page_start&&(r=r+"&page_start="+n.page_start),n.page_end&&(r=r+"&page_end="+n.page_end),o.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(a.a.api_url+"conversation/getMessages",r,{headers:o}).map(function(e){return e.json()})},e.prototype.createConversation=function(e,t,n){var o=new i.d,r="app_secret_key="+encodeURIComponent(this.fuguWidgetData.appSecretKey)+"&label_id="+e+"&en_user_id="+t+"&source=4";if(n&&Object.keys(n)){if(n.tags&&n.tags.length){var s=n.tags.map(function(e){return e.toString()});r+="&tags="+JSON.stringify(s)}if(n.custom_label&&(r+="&custom_label="+n.custom_label),n.transaction_id&&(r+="&transaction_id="+n.transaction_id),n.user_unique_key&&(r+="&user_unique_key="+n.user_unique_key),n.other_user_unique_key){var c=n.other_user_unique_key.map(function(e){return e.toString()});r+="&other_user_unique_key="+JSON.stringify(c)}n.chat_type&&(r+="&chat_type="+n.chat_type),n.force_assign&&(r+="&force_assign="+n.force_assign),n.skipBotReason&&(r+="&skip_bot_reason="+n.skipBotReason),n.skipBot&&(r+="&skip_bot="+n.skipBot),this.fuguWidgetData.alwaysSkipBot&&(r+="&skip_bot=1"),n.agent_initiated_messages&&(r+="&agent_initiated_messages="+JSON.stringify(n.agent_initiated_messages)),n.grouping_tags&&(r+="&grouping_tags="+JSON.stringify(n.grouping_tags)),n.user_first_messages_info&&(r+="&user_first_messages_info="+JSON.stringify(n.user_first_messages_info)),n.bot_form_muid&&(r+="&bot_form_muid="+n.bot_form_muid)}return o.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(a.a.api_url+"conversation/createConversation",r,{headers:o}).map(function(e){return e.json()})},e.prototype.createPeerToPeerConversation=function(e,t,n){var o={app_secret_key:encodeURIComponent(this.fuguWidgetData.appSecretKey),chat_type:n.chat_type,label_id:e,transaction_id:n.transaction_id.toString()||"",custom_label:"Task#"+(n.transaction_id.toString()||""),other_user_unique_key:n.other_user_unique_key,en_user_id:n.en_user_id,user_unique_key:n.user_unique_key};return this.http.post(a.a.api_url+"conversation/createConversation",o).map(function(e){return JSON.parse(e._body)})},e.prototype.sendImage=function(e){var t=new i.d;return e.append("app_secret_key",this.fuguWidgetData.appSecretKey),t.append("Accept","application/json"),this.http.post(a.a.api_url+"conversation/uploadFile",e,{headers:t}).map(function(e){return e.json()})},e.prototype.logOutUser=function(e){var t=new i.d;return t.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(a.a.api_url+"users/userlogout",e,{headers:t}).map(function(e){return e.json()})},e.prototype.newConversationWithBotMessage=function(e,t){var n=new i.d,o=this.fuguWidgetData.tags,r="app_secret_key="+encodeURIComponent(this.fuguWidgetData.appSecretKey)+"&chat_type=0&en_user_id="+e+"&bot_default_message="+t;return o&&(r+="&tags="+JSON.stringify(o)),n.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(a.a.api_url+"conversation/createConversation",r,{headers:n}).map(function(e){return e.json()})},e.prototype.receiveBotAction=function(e){var t=new i.d;return this.http.post(a.a.api_url+"bot/receiveBotAction",e,{headers:t}).map(function(e){return e.json()})},e.prototype.changeReadStatus=function(e,t,n){var o={app_secret_key:encodeURIComponent(this.fuguWidgetData.appSecretKey),channel_id:e,en_user_id:n,seen_status:t};return this.http.post(a.a.api_url+"users/assignUser",o).map(function(e){return JSON.parse(e._body)})},e.prototype.getByLabelId=function(e,t){var n={app_secret_key:encodeURIComponent(this.fuguWidgetData.appSecretKey),label_id:e,en_user_id:t,page_start:1,source:4};return this.http.post(a.a.api_url+"conversation/getByLabelId",n).map(function(e){return JSON.parse(e._body)})},e.prototype.integrateChannel=function(e){var t={app_secret_key:encodeURIComponent(this.fuguWidgetData.appSecretKey)};return this.http.post(a.a.api_url+"channel/integrateChannel",Object.assign(t,e)).map(function(e){return JSON.parse(e._body)})},e.prototype.integrateChannelDelete=function(e){var t={app_secret_key:encodeURIComponent(this.fuguWidgetData.appSecretKey)};return this.http.delete(a.a.api_url+"channel/integrateChannel",new i.g({body:Object.assign(t,e)})).map(function(e){return JSON.parse(e._body)})},e.prototype.requestGeocodeApi=function(){return this.http.get("https://ip.tookanapp.com:8000/requestCountryCodeGeoIP2").map(function(e){return e.json()})},e.prototype.emailTranscript=function(e){return e.app_secret_key=encodeURIComponent(this.fuguWidgetData.appSecretKey),this.http.post(a.a.api_url+"conversation/emailTranscript",e).map(function(e){return JSON.parse(e._body)})},e.ctorParameters=function(){return[{type:i.e}]},e}()},x35b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n("3j3K"),a=n("kZql"),r=n("Qbdm"),s=n("/Hyb"),c=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.overrides={pinch:{enable:!1},rotate:{enable:!1}},t}return c(t,e),t}(r.g);a.a.production&&s.config("https://d8bfad0e6e0c44fab7e6b513804c17f3@sentry.tookan.io/47 ").install();var u=function(){function e(){}return e.prototype.handleError=function(e){console.error(e),s.captureException(e)},e}(),l=function(){return function(){}}(),g=n("5oXY"),m=n("+KvB"),p=n("p3n4"),h=n("AFGG"),f=n("zCXK"),_=function(){function e(e,t,n,o){var i=this;this.router=e,this.commonService=t,this.fuguWidgetService=n,this.fayeService=o,this.highestMatchingObject={match_type:-1,match_index:-1,match_length:-1,label_id:-1},this._collpased=!0,this.alive=!0,this.isDebug=!1,this.currentUrl=window.location.href,this.previousRoute="conversations",e.events.subscribe(function(e){e instanceof g.d&&i.commonService.isMobileBrowser&&"/notifications"==e.url&&!i._collpased&&i.commonService.postMessageToParentWindow({type:"Collapse",data:{}})})}return Object.defineProperty(e.prototype,"collapsed",{get:function(){return this._collpased},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.fuguWidgetService.findIP().takeWhile(function(){return e.alive}).subscribe(function(t){e.commonService.ip=t.ip},function(e){console.log("get ip error")}),localStorage.getItem("country_info")?this.commonService.countryInfo=JSON.parse(localStorage.getItem("country_info")):this.fuguWidgetService.requestGeocodeApi().takeWhile(function(){return e.alive}).subscribe(function(t){localStorage.setItem("country_info",JSON.stringify(t.data)),e.commonService.countryInfo=t.data},function(e){console.log("get country code error")}),this.fuguWidgetService.configFetchEvent.takeWhile(function(){return e.alive}).subscribe(function(t){e.commonService.updateConfigDetails(t.data),e.fuguWidgetService.fuguWidgetData.color&&(t.data["color-theme"]=e.fuguWidgetService.fuguWidgetData.color),e.commonService.postMessageToParentWindow({type:"Config",data:t.data}),document.documentElement.style.setProperty("--color",t.data["color-theme"])}),window.app=this},e.prototype.onWindowOffline=function(e){if(e.data.type&&e.origin==e.data.parent_origin)switch(this.commonService.parentOrigin=e.data.parent_origin,this.commonService.currentUrl=e.data.current_url,a.a.production&&!this.isDebug||console.log("ng-App-Hostlistener: ",e),e.data.type){case"Expand":this.commonService.removeClassFromIframe(["transcript"]),this.setCollapsed(!1,e.data.data.navigate);break;case"Collapse":this.setCollapsed(!0);break;case"Init":this.fuguWidgetService.fuguWidgetData=e.data.data,this.commonService.hostname=e.data.hostname,this.firePutUserRequest();var t=JSON.parse(localStorage.getItem("fuguWidget"));Object.keys(t).length>0&&this.commonService.postMessageToParentWindow({type:"saveDeviceIDToLocal",data:t});break;case"InitReseller":this.fuguWidgetService.fuguWidgetData=e.data.data,this.commonService.hostname=e.data.hostname,this.commonService.initReseller=!0,this.firePutUserRequestReseller();var n=JSON.parse(localStorage.getItem("fuguWidget"));Object.keys(n).length>0&&this.commonService.postMessageToParentWindow({type:"saveDeviceIDToLocal",data:n});break;case"UpdateLocalStorageData":e.data.data&&(localStorage.fuguWidget=e.data.data);break;case"Shutdown":this.fayeService.unsubscribeAllSubscriptions(!0),this.commonService.userLogout(e.data.data.hostname);break;case"StartConversation":this.createUniqueConversation(e.data.data.data||e.data.data);break;case"StartConversationFromAgent":this.createConversationFromAgent(e.data.data.data||e.data.data);break;case"StartPeerToPeerConversation":this.createPeerToPeerConversation(e.data.data.data||e.data.data);break;case"ConfigCompleted":this.commonService.postMessageToParentWindow({type:"SetupComplete",data:{}});break;case"Blur":this.commonService.iPadState=!1;break;case"ActiveInactiveTabEvent":this.commonService.isParentTabActive=e.data.data.isActive;break;case"BotMessage":this.newConversationWithBotMessage(e.data.data);break;case"FayeNotification":e.data.data&&e.data.data.channel_id&&(this.commonService.postMessageToParentWindow({type:"Expand",data:{navigate:!1}}),this.router.navigate(["/chat/"+e.data.data.channel_id]))}},e.prototype.createPeerToPeerConversation=function(e){var t=this,n=JSON.parse(JSON.stringify(e));n.chat_type=f.a.p2p,n.en_user_id=this.commonService.userDetails.en_user_id,n.user_unique_key=this.commonService.userDetails.user_unique_key,this.fuguWidgetService.createPeerToPeerConversation(-1,this.commonService.userDetails.en_user_id,n).takeWhile(function(){return t.alive}).subscribe(function(e){console.log("transaction_id",n);var o=e.data.channel_id;t.router.navigate(["chat/"+o],{queryParams:{label_id:-1,transaction_id:n.transaction_id},skipLocationChange:!t.commonService.isMobileBrowser()})},function(e){console.log("createConversation: ",e.json())})},e.prototype.createUniqueConversation=function(e){var t=this,n=JSON.parse(JSON.stringify(e));n.custom_label?n.custom_label:this.commonService.userDetails.business_name,n.transaction_id||this.commonService.userDetails.user_id||!n.defaultMessage?(n.transaction_id||n.defaultMessage)&&this.commonService.userDetails.user_id&&this.fuguWidgetService.createConversation(-1,this.commonService.userDetails.en_user_id,n).takeWhile(function(){return t.alive}).subscribe(function(e){var o=e.data.channel_id;return n.defaultMessage?(t.commonService.defaultMessageToPublish=n.defaultMessage,n.singleDefaultMessage?t.router.navigate(["chat/"+o],{queryParams:{label_id:-1,publish_message:!0,publish_once:!0},skipLocationChange:!t.commonService.isMobileBrowser()}):t.router.navigate(["chat/"+o],{queryParams:{label_id:-1,publish_message:!0},skipLocationChange:!t.commonService.isMobileBrowser()})):t.router.navigate(["chat/"+o],{queryParams:{label_id:-1,publish_message:!1},skipLocationChange:!t.commonService.isMobileBrowser()})},function(e){console.log("createConversation: ",e.json())}):this.fuguWidgetService.createConversation(-1,this.commonService.userDetails.en_user_id,n).takeWhile(function(){return t.alive}).subscribe(function(e){var n=e.data.channel_id;t.router.navigate(["chat/"+n],{queryParams:{label_id:-1},skipLocationChange:!t.commonService.isMobileBrowser()})},function(e){console.log("createConversation: ",e.json())})},e.prototype.newConversationWithBotMessage=function(e){var t=this;this.fuguWidgetService.newConversationWithBotMessage(this.commonService.userDetails.en_user_id,e).subscribe(function(n){t.commonService.newConversationInitiated.emit({message:e}),t.firePutUserRequest()},function(e){console.log(e.json())})},e.prototype.firePutUserRequest=function(){var e=this,t=!!this.fuguWidgetService.fuguWidgetData.businessKey;this.fuguWidgetService.putUserDetails(this.commonService.putUserData()).takeWhile(function(){return e.alive}).subscribe(function(n){var o=n.data.device_key;if(e.commonService.setCookie("f_uid",o,10),t&&(e.fuguWidgetService.fuguWidgetData.appSecretKey=n.data.app_secret_key),e.commonService.updateUserDetails(n.data),e.getUrlBasedHelpMessage(),e.fayeService.setupSubscriptions(),n.data.customer_initial_form_info&&(e.fuguWidgetService.customer_inital_form=n.data.customer_initial_form_info),n.data.show_message_source&&(e.commonService.show_message_source=!0),e.fuguWidgetService.getConfigurations().takeWhile(function(){return e.alive}).subscribe(function(t){e.fuguWidgetService.configFetchEvent.emit(t)},function(e){console.log("get config error: ",e.json())}),e.commonService.is_audio_call_enabled=n.data.is_audio_call_enabled||"0",e.commonService.is_video_call_enabled=n.data.is_video_call_enabled||"0",e.commonService.userDetails.user_unique_key.length>1)e.commonService.isConversationListValid=Object.keys(n.data.conversations).length>0;else for(var i=!1,a=!1,r=0;r<n.data.conversations.length;r++){var s=n.data.conversations[r];if(a&&i)break;i||-1!=s.channel_id||(e.commonService.isConversationListValid=!0,i=!0),a||-2!=s.channel_id||""!==e.commonService.customHelpMsg||(a=!0)}e.commonService.overallUnreadCount=0,n.data.conversations.forEach(function(t){var n=t.channel_id>0?t.channel_id:t.label_id;e.commonService.conversationsUnreadCount[n]=t.unread_count?t.unread_count:0,t.unread_count>0&&(e.commonService.overallUnreadCount=e.commonService.overallUnreadCount+t.unread_count);var o=-1==t.label_id?t.channel_id:t.label_id;if(t.unique_id=o,e.commonService.conversations[o]=t,-2==t.channel_id){e.commonService.helpChannels[t.label_id]=t;var i=t.url_type,a=t.referral_url;if(a){var r=void 0,s=void 0;switch(i){case f.h.CONTAINS:e.commonService.currentUrl.includes(a)&&(r=e.commonService.currentUrl.indexOf(a),s=a.length);break;case f.h.IS:var c=e.commonService.currentUrl;e.filterUrl(c)==e.filterUrl(a)&&(r=e.commonService.currentUrl.indexOf(a),s=a.length)}r>e.highestMatchingObject.match_index&&e.highestMatchingObject.match_type!=f.h.IS||i==f.h.IS&&0==r?e.highestMatchingObject={match_type:i,match_index:r,match_length:s,label_id:t.label_id}:r==e.highestMatchingObject.match_index&&e.highestMatchingObject.match_type!=f.h.IS&&s>=e.highestMatchingObject.match_length&&(e.highestMatchingObject={match_type:i,match_index:r,match_length:s,label_id:t.label_id})}else-1==e.highestMatchingObject.label_id&&(e.highestMatchingObject={match_type:0,match_index:-1,match_length:-1,label_id:t.label_id})}}),e.commonService.isLoggedInUser=n.data.is_logged_in_user,-1!=e.highestMatchingObject.label_id&&e.showUrlMessage(e.highestMatchingObject.label_id),e.commonService.sendNotificationToParentWindow(e.commonService.overallUnreadCount,!0),e.fayeService.sendUnreadCountToParentWindow()})},e.prototype.firePutUserRequestReseller=function(){var e=this,t=!(!this.fuguWidgetService.fuguWidgetData.resellerToken||!this.fuguWidgetService.fuguWidgetData.referenceId),n=this.fuguWidgetService.fuguWidgetData.driverInfo;n&&Object.keys(n).length&&this.fuguWidgetService.putUserDetailsReseller(this.commonService.putUserDataForDriver()).takeWhile(function(){return e.alive}).subscribe(function(e){console.log("success")}),this.fuguWidgetService.putUserDetailsReseller(this.commonService.putUserData()).takeWhile(function(){return e.alive}).subscribe(function(n){var o=n.data.device_key;if(e.commonService.setCookie("f_uid",o,10),t&&(e.fuguWidgetService.fuguWidgetData.appSecretKey=n.data.app_secret_key),e.commonService.updateUserDetails(n.data),e.fayeService.setupSubscriptions(),n.data.customer_initial_form_info&&(e.fuguWidgetService.customer_inital_form=n.data.customer_initial_form_info),n.data.show_message_source&&(e.commonService.show_message_source=!0),e.commonService.is_audio_call_enabled=n.data.is_audio_call_enabled||"0",e.commonService.is_video_call_enabled=n.data.is_video_call_enabled||"0",e.fuguWidgetService.getConfigurations().takeWhile(function(){return e.alive}).subscribe(function(t){e.fuguWidgetService.configFetchEvent.emit(t)},function(e){console.log("get config error: ",e.json())}),e.commonService.userDetails.user_unique_key.length>1)e.commonService.isConversationListValid=Object.keys(n.data.conversations).length>0;else for(var i=!1,a=!1,r=function(t){var o=n.data.conversations[t];if(a&&i)return"break";i||-1!=o.channel_id||(e.commonService.isConversationListValid=!0,i=!0),a||-2!=o.channel_id||""!==e.commonService.customHelpMsg||(a=!0,setTimeout(function(){e.commonService.newConversationInitiated.emit({message:o.message,channel_id:-2})},1e3*o.widget_help_time))},s=0;s<n.data.conversations.length;s++){if("break"===r(s))break}e.commonService.overallUnreadCount=0,n.data.conversations.forEach(function(t){var n=t.channel_id>0?t.channel_id:t.label_id;e.commonService.conversationsUnreadCount[n]=t.unread_count?t.unread_count:0,t.unread_count>0&&(e.commonService.overallUnreadCount=e.commonService.overallUnreadCount+t.unread_count)}),e.commonService.sendNotificationToParentWindow(e.commonService.overallUnreadCount,!0)})},e.prototype.setCollapsed=function(e,t){void 0===t&&(t=!0),this._collpased=e,this.commonService.is_collapsed=e,e?this.router.navigate(["notifications"],{skipLocationChange:!this.commonService.isMobileBrowser()}):t&&(this.fuguWidgetService.customer_inital_form?this.router.navigate(["new-customer"],{skipLocationChange:!this.commonService.isMobileBrowser()}):this.router.navigate([this.previousRoute],{skipLocationChange:!this.commonService.isMobileBrowser()}))},e.prototype.getUrlBasedHelpMessage=function(){this.commonService.customHelpMsg=this.commonService.getParameterByName(this.commonService.currentUrl,"agent_msg")||"",this.commonService.customHelpMsg&&this.createConversationFromURL()},e.prototype.showUrlMessage=function(e){var t=this,n=this.commonService.helpChannels[e];""===this.commonService.customHelpMsg&&setTimeout(function(){t.commonService.newConversationInitiated.emit({message:t.commonService.isLoggedInUser?n.default_msg_for_user:n.message,channel_id:-2,custom_url_message:!0,label_id:e})},1e3*n.widget_help_time)},e.prototype.createConversationFromURL=function(){var e=this,t={};this.commonService.customHelpMsg&&(t.agent_initiated_messages=[this.commonService.customHelpMsg],t.tags=["agent_messages"],t.transaction_id=this.commonService.customHelpMsg.substr(0,100)),this.fuguWidgetService.fuguWidgetData.force_assign&&(t.force_assign=this.fuguWidgetService.fuguWidgetData.force_assign),this.fuguWidgetService.createConversation(-1,this.commonService.userDetails.en_user_id,t).takeWhile(function(){return e.alive}).subscribe(function(t){e.commonService.customHelpMsg="";var n=t.data.channel_id;e.commonService.conversations[n]||(e.commonService.conversationsUnreadCount[n]+=1,e.commonService.overallUnreadCount=e.commonService.overallUnreadCount+1),e.commonService.postMessageToParentWindow({type:"Expand",data:{navigate:!1}}),e.router.navigate(["chat/"+n],{queryParams:{label_id:-1,default_message:e.commonService.customHelpMsg,is_url_message:!0},skipLocationChange:!e.commonService.isMobileBrowser()})},function(e){console.log("create new conversation error")})},e.prototype.createConversationFromAgent=function(e){var t=this,n={agent_initiated_messages:e.agentMessage};e.tags&&e.tags.length&&(n.tags=e.tags),e.groupingTags&&e.groupingTags.length&&(n.grouping_tags=e.groupingTags),e.forceAssign&&(n.force_assign=e.forceAssign),e.transactionID?n.transaction_id=e.transactionID:n.transaction_id=e.agentMessage[0],n.skipBotReason=e.skipBotReason,n.skipBot=e.skipBot,this.fuguWidgetService.createConversation(-1,this.commonService.userDetails.en_user_id,n).subscribe(function(e){var n=e.data.channel_id;t.router.navigate(["chat/"+n],{queryParams:{label_id:-1},skipLocationChange:!t.commonService.isMobileBrowser()})},function(e){console.log("createConversation: ",e.json())})},e.prototype.filterUrl=function(e){return e=(e=(e=e.replace("https://","")).replace("http://","")).replace("www.","")},e.prototype.ngOnDestroy=function(){this.alive=!1},e.ctorParameters=function(){return[{type:g.l},{type:m.a},{type:p.a},{type:h.a}]},e}(),C=[[""]],v=i._14({encapsulation:0,styles:C,data:{}});function y(e){return i._40(0,[(e()(),i._38(-1,null,["\n\n\n\n"])),(e()(),i._17(1,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),i._15(2,212992,null,0,g.n,[g.b,i.Z,i.k,[8,null],i.i],null,null),(e()(),i._38(-1,null,["\n"]))],function(e,t){e(t,2,0)},null)}var b=i._12("app-root",_,function(e){return i._40(0,[(e()(),i._17(0,0,null,null,1,"app-root",[],null,[["window","message"]],function(e,t,n){var o=!0;return"window:message"===t&&(o=!1!==i._30(e,1).onWindowOffline(n)&&o),o},y,v)),i._15(1,245760,null,0,_,[g.l,m.a,p.a,h.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),S=n("2Je8"),w=n("1GJ2"),W=n("KN8t"),k=n("NVOs"),D=n("Fzro"),M=n("Um43"),O=n("fx6A"),I=n("PP02"),T=n("XBTN"),x=n("NG/o"),P=i._13(l,[_],function(e){return i._28([i._29(512,i.k,i._9,[[8,[b]],[3,i.k],i.E]),i._29(5120,i.A,i._27,[[3,i.A]]),i._29(4608,S.m,S.l,[i.A]),i._29(5120,i.c,i._18,[]),i._29(5120,i.y,i._24,[]),i._29(5120,i.z,i._25,[]),i._29(4608,r.c,r.s,[S.c]),i._29(6144,i.Q,null,[r.c]),i._29(4608,r.f,d,[]),i._29(5120,r.d,function(e,t,n,o){return[new r.l(e),new r.p(t),new r.o(n,o)]},[S.c,S.c,S.c,r.f]),i._29(4608,r.e,r.e,[r.d,i.G]),i._29(135680,r.n,r.n,[S.c]),i._29(4608,r.m,r.m,[r.e,r.n]),i._29(5120,w.a,W.d,[]),i._29(5120,w.c,W.e,[]),i._29(4608,w.b,W.c,[w.a,w.c]),i._29(5120,i.O,W.f,[r.m,w.b,i.G]),i._29(6144,r.q,null,[r.n]),i._29(4608,i.X,i.X,[i.G]),i._29(4608,r.h,r.h,[S.c]),i._29(4608,r.j,r.j,[S.c]),i._29(4608,k.A,k.A,[]),i._29(4608,k.f,k.f,[]),i._29(4608,D.c,D.c,[]),i._29(4608,D.h,D.b,[]),i._29(5120,D.j,D.k,[]),i._29(4608,D.i,D.i,[D.c,D.h,D.j]),i._29(4608,D.g,D.a,[]),i._29(5120,D.e,D.l,[D.i,D.g]),i._29(4608,M.b,W.b,[i.O,r.b]),i._29(5120,g.a,g.v,[g.l]),i._29(4608,g.e,g.e,[]),i._29(6144,g.g,null,[g.e]),i._29(135680,g.o,g.o,[g.l,i.D,i.j,i.w,g.g]),i._29(4608,g.f,g.f,[]),i._29(5120,g.i,g.y,[g.w]),i._29(5120,i.b,function(e){return[e]},[g.i]),i._29(4608,p.a,p.a,[D.e]),i._29(4608,O.a,O.a,[]),i._29(135680,m.a,m.a,[p.a,O.a,g.l]),i._29(4608,I.a,I.a,[]),i._29(4608,T.a,T.a,[]),i._29(135680,h.a,h.a,[m.a,p.a]),i._29(512,S.b,S.b,[]),i._29(512,i.o,u,[]),i._29(1024,i.F,function(){return[g.s()]},[]),i._29(512,g.w,g.w,[i.w]),i._29(1024,i.d,function(e,t,n){return[r.r(e,t),g.x(n)]},[[2,r.i],[2,i.F],g.w]),i._29(512,i.e,i.e,[[2,i.d]]),i._29(131584,i._16,i._16,[i.G,i._10,i.w,i.o,i.k,i.e]),i._29(2048,i.g,null,[i._16]),i._29(512,i.f,i.f,[i.g]),i._29(512,r.a,r.a,[[3,r.a]]),i._29(512,k.x,k.x,[]),i._29(512,k.m,k.m,[]),i._29(512,k.u,k.u,[]),i._29(512,D.f,D.f,[]),i._29(1024,g.r,g.t,[[3,g.l]]),i._29(512,g.q,g.c,[]),i._29(512,g.b,g.b,[]),i._29(512,S.h,S.e,[S.p,[2,S.a]]),i._29(512,S.g,S.g,[S.h]),i._29(512,i.j,i.j,[]),i._29(512,i.D,i.U,[i.j,[2,i.V]]),i._29(1024,g.j,function(){return[[{path:"call",loadChildren:"./modules/video-call/video-call.module#VideoCallModule"},{path:"payment",loadChildren:"./modules/payment-request/payment-request.module#PaymentRequestModule"},{path:"",loadChildren:"./modules/layout/layout.module#LayoutModule"}]]},[]),i._29(256,g.h,{},[]),i._29(1024,g.l,g.u,[i.g,g.q,g.b,S.g,i.w,i.D,i.j,g.j,g.h,[2,g.p],[2,g.k]]),i._29(512,g.m,g.m,[[2,g.r],[2,g.l]]),i._29(512,W.a,W.a,[]),i._29(512,x.a,x.a,[]),i._29(512,l,l,[])])});a.a.production&&Object(i._3)(),Object(r.k)().bootstrapModuleFactory(P)},zCXK:function(e,t,n){"use strict";var o,i,a,r,s,c,d,u,l;n.d(t,"e",function(){return o}),n.d(t,"i",function(){return i}),n.d(t,"f",function(){return a}),n.d(t,"g",function(){return r}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"h",function(){return d}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return l}),function(e){e[e.Customer_Agent_Message=1]="Customer_Agent_Message",e[e.Activity_Message=2]="Activity_Message",e[e.Private_Message=3]="Private_Message",e[e.Image_Message=10]="Image_Message",e[e.File_Message=11]="File_Message",e[e.Bot_Text_Message=15]="Bot_Text_Message",e[e.Form_Message=17]="Form_Message",e[e.Button_Message=16]="Button_Message",e[e.Feedback_Message=14]="Feedback_Message",e[e.Video_Call=18]="Video_Call",e[e.Payment_Message=19]="Payment_Message",e[e.Custom_Action_Message=20]="Custom_Action_Message"}(o||(o={})),function(e){e[e.Bot=0]="Bot",e[e.Customer=1]="Customer",e[e.Agent=2]="Agent"}(i||(i={})),function(e){e[e.Chat_Reassign=3]="Chat_Reassign",e[e.Read_Unread=5]="Read_Unread",e[e.Read_All=6]="Read_All",e[e.User_Migration=7]="User_Migration",e[e.User_Logout=8]="User_Logout",e[e.Channel_Refresh=13]="Channel_Refresh"}(a||(a={})),function(e){e[e.Typing_End=0]="Typing_End",e[e.Typing_Start=1]="Typing_Start",e[e.Typing_Stopped=2]="Typing_Stopped"}(r||(r={})),function(e){e[e.Sending=0]="Sending",e[e.Sent=1]="Sent",e[e.Delivered=2]="Delivered",e[e.Read=3]="Read"}(s||(s={})),function(e){e[e.p2p=1]="p2p",e[e.other=0]="other"}(c||(c={})),function(e){e[e.EMPTY=0]="EMPTY",e[e.IS=1]="IS",e[e.CONTAINS=2]="CONTAINS"}(d||(d={})),function(e){e[e.EMAIL=5]="EMAIL",e[e.MESSENGER=6]="MESSENGER",e[e.WHATSAPP=7]="WHATSAPP"}(u||(u={})),function(e){e[e.MESSAGE_DELETED=0]="MESSAGE_DELETED",e[e.MESSAGE_NOT_DELETED=1]="MESSAGE_NOT_DELETED",e[e.MISSED_CALL=2]="MISSED_CALL",e[e.COMPLETED_CALL=3]="COMPLETED_CALL"}(l||(l={}))}},[0]);